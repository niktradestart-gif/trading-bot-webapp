<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ASPIRE TRADE ‚Äî –ü–∞–Ω–µ–ª—å</title>
  <style>
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background-color: #0d1117;
      color: #ffffff;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    header {
      background: linear-gradient(90deg, #0a84ff, #0066ff);
      width: 100%;
      text-align: center;
      padding: 15px 0;
      font-size: 1.4em;
      font-weight: 600;
      letter-spacing: 1px;
    }
    .container {
      width: 95%;
      max-width: 1000px;
      margin-top: 20px;
      background: #161b22;
      border-radius: 16px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
      padding: 20px;
    }
    .section {
      margin-bottom: 25px;
    }
    h2 {
      font-size: 1.2em;
      border-left: 4px solid #0a84ff;
      padding-left: 10px;
      margin-bottom: 10px;
      color: #58a6ff;
    }
    .signal, .system, .history {
      background: #1c2128;
      border-radius: 10px;
      padding: 15px;
    }
    .signal span {
      display: inline-block;
      margin: 5px 0;
      font-size: 1.05em;
    }
    img {
      width: 100%;
      border-radius: 10px;
      margin-top: 10px;
    }
    .error {
      color: #ff6666;
      font-style: italic;
    }
    footer {
      text-align: center;
      padding: 10px;
      color: #555;
      font-size: 0.9em;
      margin-top: auto;
    }
    .refresh {
      display: inline-block;
      padding: 8px 14px;
      border: none;
      background-color: #0a84ff;
      color: white;
      border-radius: 8px;
      font-size: 0.95em;
      cursor: pointer;
      margin-bottom: 15px;
    }
    .refresh:hover {
      background-color: #0066ff;
    }
  </style>
</head>

<body>
  <header>üöÄ ASPIRE TRADE ‚Äî LIVE DASHBOARD</header>
  <div class="container">
    <button class="refresh" onclick="loadData()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>

    <div class="section signal">
      <h2>üìà –ê–∫—Ç–∏–≤–Ω—ã–π —Å–∏–≥–Ω–∞–ª</h2>
      <div id="signalContent">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <div class="section">
      <h2>üìä –ì—Ä–∞—Ñ–∏–∫</h2>
      <div id="chartContent">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <div class="section system">
      <h2>‚öôÔ∏è –°–∏—Å—Ç–µ–º–∞</h2>
      <div id="systemContent">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <div class="section history">
      <h2>üïí –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</h2>
      <div id="resultContent">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>
  </div>

  <footer>¬© 2025 ASPIRE TRADE | Real-time AI Trading Panel</footer>

  <script>
    const API_URL = "http://89.23.98.206:8080/api/latest_full.json";

    async function loadData() {
      document.getElementById("signalContent").textContent = "–ó–∞–≥—Ä—É–∑–∫–∞...";
      document.getElementById("chartContent").textContent = "–ó–∞–≥—Ä—É–∑–∫–∞...";
      document.getElementById("systemContent").textContent = "–ó–∞–≥—Ä—É–∑–∫–∞...";
      document.getElementById("resultContent").textContent = "–ó–∞–≥—Ä—É–∑–∫–∞...";

      try {
        const res = await fetch(API_URL);
        const data = await res.json();

        // === SIGNAL ===
        const sig = data.signal;
        if (!sig || sig.error) {
          document.getElementById("signalContent").innerHTML = `<p class="error">${sig?.error || "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"}</p>`;
        } else {
          document.getElementById("signalContent").innerHTML = `
            <span>üíº –ü–∞—Ä–∞: <b>${sig.pair}</b></span><br>
            <span>üìä –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: <b>${sig.direction}</b></span><br>
            <span>üéØ –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: <b>${sig.confidence || 0}/10</b></span><br>
            <span>‚è∞ –≠–∫—Å–ø–∏—Ä–∞—Ü–∏—è: ${sig.expiry || 1} –º–∏–Ω</span><br>
            <span>üîç –ò—Å—Ç–æ—á–Ω–∏–∫: ${sig.source || "N/A"}</span>
          `;
        }

        // === CHART ===
        if (data.chart_base64) {
          document.getElementById("chartContent").innerHTML = `<img src="${data.chart_base64}" alt="chart">`;
        } else {
          document.getElementById("chartContent").innerHTML = `<p class="error">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞</p>`;
        }

        // === SYSTEM ===
        const sys = data.system;
        document.getElementById("systemContent").innerHTML = `
          üë• –ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: <b>${sys.active_users}</b><br>
          üìà –í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫: <b>${sys.total_trades}</b><br>
          üéØ Win Rate: <b>${sys.win_rate}%</b><br>
          üß† ML —Ç–æ—á–Ω–æ—Å—Ç—å: <b>${sys.ml_accuracy}%</b>
        `;

        // === RESULT ===
        const resu = data.result;
        if (!resu || resu.error) {
          document.getElementById("resultContent").innerHTML = `<p class="error">${resu?.error || "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"}</p>`;
        } else {
          document.getElementById("resultContent").innerHTML = `
            #${resu.id} ${resu.pair} ‚Äî ${resu.direction}<br>
            –†–µ–∑—É–ª—å—Ç–∞—Ç: <b>${resu.result}</b><br>
            üí∞ –í—Ö–æ–¥: ${resu.entry_price}<br>
            üí∞ –í—ã—Ö–æ–¥: ${resu.exit_price}
          `;
        }

      } catch (err) {
        console.error(err);
        document.getElementById("signalContent").innerHTML = `<p class="error">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ API</p>`;
      }
    }

    loadData();
    setInterval(loadData, 5000); // –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫
  </script>
</body>
</html>
